{% extends 'AppBundle::base.html.twig' %}

{% block title %}Выбор рабочего места{% endblock %}
{% block navbar %} {% endblock %}


{% block body %}
<div class="container">
			<div class="row">
                <div class="col-lg-12">
                    <h1 class="page-header">Выбор рабочего места</h1>
				</div>
			</div>	
        <div class="row">
			<div class="col-md-6 col-md-offset-3">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">Пожалуйста выберите рабочее место</h3>
                    </div>
                    <div class="panel-body">
                        <form role="form">
                            <fieldset>
								<div class="col-lg-6">
									<div class="form-group">
												<label>Здание</label>
												<select id="building" class="form-control">
													 {% for qvBuilding in qvBuildings %}
													<option value='{{ qvBuilding.id }}'>{{qvBuilding.name}}</option>
													{% endfor %}	
												</select>
									</div>
								</div>
								<div class="col-lg-6">
									<div class="form-group">
												<label>КПП</label>
												<select id="checkpoints" class="form-control">
													{% for qvCheckpoint in qvCheckpoints %}
													<option>{{qvCheckpoint.name}}</option>
												{% endfor %}
												</select>
									</div>
								</div>	
                                	
								<div class="col-lg-12 text-right">
									<!-- Change this to a button or input when using this as a form -->
									<a href="{{path('entrance')}}" class="btn btn-primary btn-lg">Подтвердить</a>
								</div>
                            </fieldset>
                        </form>
					 </div>
                </div>
            </div>
        </div>
</div>

		<script src="{{asset('bootstrap1/bower_components/jquery/dist/jquery.min.js')}}"></script>

<script> 
$(function (){
	$('#building').change(function(){
				$.ajax({
			        type: "GET",
			        url: "{{ path('checkpoints')}}",
			        data: {'id':$('#building option:selected').val()},
			        success: function(data){
						        $('#checkpoints').empty();
					        	$.each(JSON.parse(data),function(k,v){
											        		$('#checkpoints').append('<option value="'+v.id+'">'+v.name+'</option>')
											        	});
					       	 }
		        });
		});
	
	
});
</script>
{% endblock %}