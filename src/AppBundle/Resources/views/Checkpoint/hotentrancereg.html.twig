{% extends 'AppBundle::base.html.twig' %}

{% block title %}Регистрация посетителя{% endblock %}

{% block pagemenu %}
	{{ include('AppBundle:Checkpoint:pagemenu.html.twig') }}
{% endblock %}



{% block body %}

        <div id="page-wrapper">
            <!-- Page Heading -->
					{% block breadcrumb %}
					<div id="bc1" class="btn-group btn-breadcrumb">
                        <br>
                        <a class="btn btn-default" href="index"><i class="fa fa-home"></i></a>
                        <a class="btn btn-default" href="hotentrance">Посетители без заявок</a>
                        <a class="btn btn-default" href="hotentrance-registration">Регистрация посетителя без заявки</a>
					</div>
					{% endblock %}
			<div class="row">
			</div>
            <div class="row">
                <div class="col-lg-12">
                    <h1 class="page-header">Регистрация посетителя без заявки</h1>
				</div>
			</div>
		
			<div class="row">
                <div class="col-lg-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                           <i class="glyphicon glyphicon-user"></i> Посетитель
                        </div>
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-lg-12">
                                	{{ form_start(form) }}
                                	<div class="form-margin">
                              		  	{{ form_label(form.firstname) }}
      								    {{ form_errors(form.firstname) }}
     								    {{ form_widget(form.firstname) }}
     								</div>
                                	<div class="form-margin">
                              		  	{{ form_label(form.lastname) }}
      								    {{ form_errors(form.lastname) }}
     								    {{ form_widget(form.lastname) }}
     								</div>
                                	<div class="form-margin">
                              		  	{{ form_label(form.patronimic) }}
      								    {{ form_errors(form.patronimic) }}
     								    {{ form_widget(form.patronimic) }}
     								</div>
                                	<div class="form-margin">
                              		  	{{ form_label(form.documentnumber) }}
      								    {{ form_errors(form.documentnumber) }}
     								    {{ form_widget(form.documentnumber) }}
     								</div>
                                	<div class="form-margin">
                              		  	{{ form_label(form.organization) }}
      								    {{ form_errors(form.organization) }}
     								    {{ form_widget(form.organization) }}
     								</div>
                                	<div class="form-margin">
                              		  	{{ form_label(form.attendant) }}
      								    {{ form_errors(form.attendant) }}
     								    {{ form_widget(form.attendant) }}
     								</div>
                                	<div class="form-margin">
                              		  	{{ form_label(form.comment) }}
      								    {{ form_errors(form.comment) }}
     								    {{ form_widget(form.comment) }}
     								</div>
                                	<div class="form-margin">
                              		  	{{ form_label(form.entrancedate) }}
      								    {{ form_errors(form.entrancedate) }}
     								    {{ form_widget(form.entrancedate) }}
     								</div>
                                	<div class="form-margin">
                              		  	{{ form_label(form.leaser) }}
      								    {{ form_errors(form.leaser) }}
     								    {{ form_widget(form.leaser) }}
     								</div>
       								 <div class="text-right label-margin" >
       								 	{{ form_label(form.label) }}
       								 	{{form_widget(form.label)}}</div>
									<div>
       								 {{ form_widget(form)}}</div>
       								 <input type="submit" class="btn btn-primary" value="Зарегистрировать" />
       								 <a class="btn btn-default" href="hotentrance">Отмена</a>
 									   {{ form_end(form) }}
                                   
                                </div>
							</div>
						</div>
					</div>
				</div>
                               
									<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
										<div class="modal-dialog">
											<div class="modal-content">
												<div class="modal-header">
													<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
													<h4 class="modal-title" id="myModalLabel">Выбрать к кому посетитель</h4>
												</div>
												<div class="modal-body">
													<div class="row">
														<div class="col-lg-12">
																<div class="form-group input-group">
																	<input type="text" class="form-control" placeholder="Найти">
																	<span class="input-group-btn"><button class="btn btn-default" type="button"><i class="fa fa-search"></i></button></span>
																</div>
														</div>
													</div>
													<div class="dataTable_wrapper">
														<table class="table table-striped table-bordered table-hover" id="dataTables-example">
															<thead>
																<tr>
																	<th>Название организации</th>
																</tr>
															</thead>
															<tbody id="leasers">
																{%for qvLeaser in qvLeasers%}
																<tr>
																<td value="{{qvLeaser.id}}" name"tdf" data-dismiss="modal">{{qvLeaser.name}}</td>
																</tr>
																{%endfor%}
															</tbody>
														</table>
													</div>
												</div>
												<div class="modal-footer">
												<button type="button" class="btn btn-default" data-dismiss="modal">Отмена</button>
												</div>
											</div>
										<!-- /.modal-content -->
										</div>
									<!-- /.modal-dialog -->
									</div>
			</div>
		</div>
<script src="{{asset('bootstrap1/bower_components/jquery/dist/jquery.min.js')}}"></script>
<script> 
$(function (){
	$('#leasers').on('click', 'td', function(){
		var leaserId = $(this).find('td').val();
		$.ajax({
			type: "GET",
			url:"{{path('add-leaser')}}",
			data: {'id': leaserId},
			success: function(data){
				var leaser = JSON.parse(data);
				$('#qv_hot_entrance_leaser').val(leaser.name);
			}
        });
	});
});


</script>
{% endblock %}