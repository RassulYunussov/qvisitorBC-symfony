{% extends 'AppBundle::base.html.twig' %}

{% block title %}Посетители{% endblock %}

{% block pagemenu %}
	{{ include('AppBundle:Checkpoint:pagemenu.html.twig') }}
{% endblock %}



{% block body %}

        <div id="page-wrapper">
            <!-- Page Heading -->
					{% block breadcrumb %}
					<div id="bc1" class="btn-group btn-breadcrumb">
						<br>
                        <a class="btn btn-default" href="{{path('home')}}"><i class="fa fa-home"></i></a>
						<a class="btn btn-default" href="{{path('entrance')}}">Посетители</a>
						<a class="btn btn-default" href="{{path('entrance_registration')}}">Регистрация посетителя</a>
						
					</div>
					{% endblock %}
			<div class="row">
			</div>
            <div class="row">
                <div class="col-lg-12">
                    <h1 class="page-header">Регистрация посетителя</h1>
				</div>
			</div>
			
				
			
			<div class="row">
                <div class="col-lg-12">
						<div class="form-group input-group">
                            <input type="text" class="form-control" placeholder="Найти">
                            <span class="input-group-btn"><button class="btn btn-default" type="button"><i class="fa fa-search"></i></button></span>
                        </div>
				</div>
            </div>
                <!-- /.row -->
           
			<div class="row">
                <div class="col-lg-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h4>Список заявок</h4>
                        </div>
                        <!-- /.panel-heading -->
                        <div class="panel-body">
                            <div class="row">
								<div class="col-lg-8">
									<h5>Всего: </h5>
								</div>
							</div>
							<div class="dataTable_wrapper">
                                <table class="table table-striped table-bordered table-hover" id="dataTables-example">
                                    <thead>
                                        <tr>
                                            <th>Номер заявки</th>
                                            <th>ФИО</th>
                                            <th>Действия</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for qvOrder in qvOrders %}
                                            <tr>
                                        <td>{{qvOrder.id}}</td>
                                          <td>  {% for qvVisitor in qvOrder.visitors %}
										
                                        {{qvVisitor.lastname}} {{qvVisitor.firstname}} {{qvVisitor.patronimic}} </br>{% endfor %}</td>
                                        <td><button onclick="$('#myModal .modal-dialog').load('{{path('select-visitor', {'qvOrder': qvOrder.id})}}');" class="btn btn-sm btn-default" data-toggle="modal" data-target="#myModal">Зарегистрировать</button><a href="{{path('test',{'qvOrder': qvOrder.id})}}" class="btn btn-danger">тест, без модального окна РАБОТАЕТ</a></td>
                                        </tr>
                                    
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
						</div>	
                        <!-- /.panel-body -->
                    </div>
                    <!-- /.panel -->
                </div>
                <!-- /.col-lg-12 -->
            </div>

 <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                    <div class="modal-dialog"></div></div>
		</div>
{% endblock %}

{% block js %}
    
    <script>
    $(document).ready(function() {
        $('#dataTables-example').DataTable({
                responsive: true
        });
    });
    </script>
{% endblock %}