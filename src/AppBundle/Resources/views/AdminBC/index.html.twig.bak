{% extends 'AppBundle::base.html.twig' %}

{% block title %}Личный кабинет администратора{% endblock %}

{% block body %}
	<link href="css/main.css" rel="stylesheet" type="text/css">
	 <div id="page-wrapper">
            <div class="row">
                <div class="col-lg-12">
                	{% block breadcrumb %}
					<div id="breadcrumbs">
						<br>
						<ul>
						<li><a href="\adminbc\index">Главная</a></li>
						</ul>
					</div>
					{% endblock %}
				
               <h1 class="page-header">Личный кабинет администратора</h1>
                </div>
                <!-- /.col-lg-12 -->
       <div class="row">
                <div class="col-lg-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            Аналитика
                        </div>
                        <!-- /.panel-heading -->
                        <div class="panel-body">
                            <!-- Nav tabs -->
                            <ul class="nav nav-tabs">
                                <li class="active"><a href="#home" data-toggle="tab">Активность арендаторов</a>
                                </li>
                                <li><a href="#profile" data-toggle="tab">Использование системы</a>
                                </li>
                               </ul>

                            <!-- Tab panes -->
                            <div class="tab-content">
                                <div class="tab-pane fade in active" id="home">
		   <h4>Активность арендаторов</h4>
									<div id="container" style="height: 400px"></div>
                                </div>
                                <div class="tab-pane fade" id="profile">
                                    <h4>Использование системы</h4>
									<div id="" style="min-width: 70%; height: 70%; margin: 0 auto"></div>
                                </div>
                               
                            </div>
                        </div>
                        <!-- /.panel-body -->
                    </div>
                    <!-- /.panel -->
                </div>
	   </div>
				
<!-- two different charts -->
<div id="chart_1" class="chart"></div>
<div id="chart_2" class="chart"></div>
	</div>
</div></div>
{% endblock %}


{% block javascripts %}
{{parent()}}
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/highcharts-3d.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>

<script>
$(function () {
    $('#container').highcharts({
        chart: {
            type: 'area'
        },
        title: {
            text: 'US and USSR nuclear stockpiles'
        },
        subtitle: {
            text: 'Source: <a href="http://thebulletin.metapress.com/content/c4120650912x74k7/fulltext.pdf">' +
                'thebulletin.metapress.com</a>'
        },
        xAxis: {
            allowDecimals: false,
            labels: {
                formatter: function () {
                    return this.value; // clean, unformatted number for year
                }
            }
        },
        yAxis: {
            title: {
                text: 'Nuclear weapon states'
            },
            labels: {
                formatter: function () {
                    return this.value / 1000 + 'k';
                }
            }
        },
        tooltip: {
            pointFormat: '{series.name} produced <b>{point.y:,.0f}</b><br/>warheads in {point.x}'
        },
        plotOptions: {
            area: {
	pointStart: 1940,
                marker: {
                    enabled: false,
                    symbol: 'circle',
                    radius: 2,
                    states: {
                        hover: {
                            enabled: true
                        }
                    }
                }
            }
        },
        series: [{
            name: 'USA',
            data: [null, null, null, null, null, 6, 11, 32, 110, 235, 369, 640,
			1005, 1436, 2063, 3057, 4618, 6444, 9822, 15468, 20434, 24126,
			27387, 29459, 31056, 31982, 32040, 31233, 29224, 27342, 26662,
			26956, 27912, 28999, 28965, 27826, 25579, 25722, 24826, 24605,
			24304, 23464, 23708, 24099, 24357, 24237, 24401, 24344, 23586,
			22380, 21004, 17287, 14747, 13076, 12555, 12144, 11009, 10950,
			10871, 10824, 10577, 10527, 10475, 10421, 10358, 10295, 10104]
			}, {
            name: 'USSR/Russia',
            data: [null, null, null, null, null, null, null, null, null, null,
			5, 25, 50, 120, 150, 200, 426, 660, 869, 1060, 1605, 2471, 3322,
			4238, 5221, 6129, 7089, 8339, 9399, 10538, 11643, 13092, 14478,
			15915, 17385, 19055, 21205, 23044, 25393, 27935, 30062, 32049,
			33952, 35804, 37431, 39197, 45000, 43000, 41000, 39000, 37000,
			35000, 33000, 31000, 29000, 27000, 25000, 24000, 23000, 22000,
			21000, 20000, 19000, 18000, 18000, 17000, 16000]
        }]
    });
});
</script>
<script>
	$(function () {
		
		var colors = Highcharts.getOptions().colors,
        categories = ['MSIE', 'Firefox', 'Chrome', 'Safari', 'Opera'],
        data = [{
            y: 56.33,
            color: colors[0],
            drilldown: {
                name: 'MSIE versions',
                categories: ['MSIE 6.0', 'MSIE 7.0', 'MSIE 8.0', 'MSIE 9.0', 'MSIE 10.0', 'MSIE 11.0'],
                data: [1.06, 0.5, 17.2, 8.11, 5.33, 24.13],
                color: colors[0]
            }
			}, {
            y: 10.38,
            color: colors[1],
            drilldown: {
                name: 'Firefox versions',
                categories: ['Firefox v31', 'Firefox v32', 'Firefox v33', 'Firefox v35', 'Firefox v36', 'Firefox v37', 'Firefox v38'],
                data: [0.33, 0.15, 0.22, 1.27, 2.76, 2.32, 2.31, 1.02],
                color: colors[1]
            }
			}, {
            y: 24.03,
            color: colors[2],
            drilldown: {
                name: 'Chrome versions',
                categories: ['Chrome v30.0', 'Chrome v31.0', 'Chrome v32.0', 'Chrome v33.0', 'Chrome v34.0',
				'Chrome v35.0', 'Chrome v36.0', 'Chrome v37.0', 'Chrome v38.0', 'Chrome v39.0', 'Chrome v40.0', 'Chrome v41.0', 'Chrome v42.0', 'Chrome v43.0'
				],
                data: [0.14, 1.24, 0.55, 0.19, 0.14, 0.85, 2.53, 0.38, 0.6, 2.96, 5, 4.32, 3.68, 1.45],
                color: colors[2]
            }
			}, {
            y: 4.77,
            color: colors[3],
            drilldown: {
                name: 'Safari versions',
                categories: ['Safari v5.0', 'Safari v5.1', 'Safari v6.1', 'Safari v6.2', 'Safari v7.0', 'Safari v7.1', 'Safari v8.0'],
                data: [0.3, 0.42, 0.29, 0.17, 0.26, 0.77, 2.56],
                color: colors[3]
            }
			}, {
            y: 0.91,
            color: colors[4],
            drilldown: {
                name: 'Opera versions',
                categories: ['Opera v12.x', 'Opera v27', 'Opera v28', 'Opera v29'],
                data: [0.34, 0.17, 0.24, 0.16],
                color: colors[4]
            }
			}, {
            y: 0.2,
            color: colors[5],
            drilldown: {
                name: 'Proprietary or Undetectable',
                categories: [],
                data: [],
                color: colors[5]
            }
        }],
        browserData = [],
        versionsData = [],
        i,
        j,
        dataLen = data.length,
        drillDataLen,
        brightness;
		
		
		// Build the data arrays
		for (i = 0; i < dataLen; i += 1) {
			
			// add browser data
			browserData.push({
				name: categories[i],
				y: data[i].y,
				color: data[i].color
			});
			
			// add version data
			drillDataLen = data[i].drilldown.data.length;
			for (j = 0; j < drillDataLen; j += 1) {
				brightness = 0.2 - (j / drillDataLen) / 5;
				versionsData.push({
					name: data[i].drilldown.categories[j],
					y: data[i].drilldown.data[j],
					color: Highcharts.Color(data[i].color).brighten(brightness).get()
				});
			}
		}
		
		// Create the chart
		$('#system').highcharts({
			chart: {
				type: 'pie'
			},
			title: {
				text: 'Browser market share, January, 2015 to May, 2015'
			},
			subtitle: {
				text: 'Source: <a href="http://netmarketshare.com/">netmarketshare.com</a>'
			},
			yAxis: {
				title: {
					text: 'Total percent market share'
				}
			},
			plotOptions: {
				pie: {
					shadow: false,
					center: ['50%', '50%']
				}
			},
			tooltip: {
				valueSuffix: '%'
			},
			series: [{
				name: 'Browsers',
				data: browserData,
				size: '60%',
				dataLabels: {
					formatter: function () {
						return this.y > 5 ? this.point.name : null;
					},
					color: '#ffffff',
					distance: -30
				}
				}, {
				name: 'Versions',
				data: versionsData,
				size: '80%',
				innerSize: '60%',
				dataLabels: {
					formatter: function () {
						// display only if larger than 1
						return this.y > 1 ? '<b>' + this.point.name + ':</b> ' + this.y + '%' : null;
					}
				}
			}]
		});
	});
	
</script>
{% endblock %}